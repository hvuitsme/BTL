<link rel="stylesheet" href="/css/info.css" />
<script src="https://unpkg.com/gsap@3.9.0/dist/gsap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>

<div class="container">
  <nav
    style="--bs-breadcrumb-divider: url(&#34;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='%236c757d'/%3E%3C/svg%3E&#34;);"
    aria-label="breadcrumb">
    <ol class="breadcrumb my-3">
      <li class="breadcrumb-item"><a href="http://localhost:7749/">Home</a></li>
      <li class="breadcrumb-item active" aria-current="page"><a href="http://localhost:7749/info2">Apple Watch SE 2023
          GPS Sport Band (Viền Nhôm, Dây Cao Su)</a></li>
    </ol>
  </nav>
</div>

<div class="container">
  <div class="row pb-4">
    <div class="col-lg-5 mb-2">
      <div class="card border-0">
        <div class="card-body p-4">
          <div class="row d-flex justify-content-center">
            <div class="col-lg">
              <div class="main-image">
                <img id="main-img"
                  src="https://salt.tikicdn.com/cache/750x750/ts/product/a8/58/4b/55902e0caa453dfb4c81907e56deec02.jpg.webp"
                  alt="Main Image" class="img-fluid custom-rounded" />
              </div>
            </div>
          </div>
          <div class="row d-flex justify-content-center">
            <div class="col-lg-6">
              <div class="thumbnail-container">
                <img
                  src="https://salt.tikicdn.com/cache/750x750/ts/product/f3/d4/cb/73500caa1a9d79ae8c7901ca0514d639.jpg.webp"
                  alt="Thumbnail 2"
                  onclick="changeImage('https://salt.tikicdn.com/cache/750x750/ts/product/f3/d4/cb/73500caa1a9d79ae8c7901ca0514d639.jpg.webp')"
                  class="img-thumbnail" /><!-- Thêm class 'selected-thumbnail' vào đây -->
                <!-- Thêm class 'selected-thumbnail' cho ảnh đầu tiên khi trang được tải -->
                <img
                  src="https://salt.tikicdn.com/cache/750x750/ts/product/84/02/50/fa29fcaee7ea2aa767c892e5da99fe32.jpg.webp"
                  alt="Thumbnail 3"
                  onclick="changeImage('https://salt.tikicdn.com/cache/750x750/ts/product/84/02/50/fa29fcaee7ea2aa767c892e5da99fe32.jpg.webp')"
                  class="img-thumbnail" />
                <img
                  src="https://salt.tikicdn.com/cache/750x750/ts/product/57/00/ea/b1dabe0b6afd26929215626450ac7bc7.jpg.webp"
                  alt="Thumbnail 4"
                  onclick="changeImage('https://salt.tikicdn.com/cache/750x750/ts/product/57/00/ea/b1dabe0b6afd26929215626450ac7bc7.jpg.webp')"
                  class="img-thumbnail" />
                <img
                  src="https://salt.tikicdn.com/cache/750x750/ts/product/ce/b5/43/25669dbcbe94d000905be521b5dd3fc6.jpg.webp"
                  alt="Thumbnail 5"
                  onclick="changeImage('https://salt.tikicdn.com/cache/750x750/ts/product/ce/b5/43/25669dbcbe94d000905be521b5dd3fc6.jpg.webp')"
                  class="img-thumbnail" />
                <img
                  src="https://salt.tikicdn.com/cache/750x750/ts/product/6e/db/70/c53ead59b797a25880ab73d09508d2e9.jpg.webp"
                  alt="Thumbnail 1"
                  onclick="changeImage('https://salt.tikicdn.com/cache/750x750/ts/product/6e/db/70/c53ead59b797a25880ab73d09508d2e9.jpg.webp')"
                  class="img-thumbnail selected-thumbnail" /> <!-- Thêm class 'selected-thumbnail' vào đây -->
                <!-- Thêm class 'selected-thumbnail' cho ảnh đầu tiên khi trang được tải -->
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>
    <div class="col-lg-7 mb-2">
      <div class="card border-0 h-100">
        <div class="card-body">
          <p class="card-text sp">
          <h1 class="m-0" id="textinfo">Apple Watch SE 2023 GPS Sport Band (Viền Nhôm, Dây Cao Su)</h1>
          </p>
          <span class="block-20__person-rating">
            <p>
              {{!-- <i class="fas fa-star star-bright"></i>
              <i class="fas fa-star star-bright"></i>
              <i class="fas fa-star star-bright"></i>
              <i class="fas fa-star star-bright"></i> --}}
              <i class="fas fa-star star-bright"></i>
              4.8
            </p>
          </span>
          <p class="card-text "><del>5.990.000₫</del> -26%</p>
          <p class="card-text price">4.492.500₫</p>
          <a class="sp btn btn-secondary mx-lg-3 mb-1" href="#" onclick="addToCart()">Thêm vào giỏ hàng</a>
          <p class="text-center align-self-center">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-truck"
              viewBox="0 0 16 16">
              <path
                d="M0 3.5A1.5 1.5 0 0 1 1.5 2h9A1.5 1.5 0 0 1 12 3.5V5h1.02a1.5 1.5 0 0 1 1.17.563l1.481 1.85a1.5 1.5 0 0 1 .329.938V10.5a1.5 1.5 0 0 1-1.5 1.5H14a2 2 0 1 1-4 0H5a2 2 0 1 1-3.998-.085A1.5 1.5 0 0 1 0 10.5zm1.294 7.456A1.999 1.999 0 0 1 4.732 11h5.536a2.01 2.01 0 0 1 .732-.732V3.5a.5.5 0 0 0-.5-.5h-9a.5.5 0 0 0-.5.5v7a.5.5 0 0 0 .294.456M12 10a2 2 0 0 1 1.732 1h.768a.5.5 0 0 0 .5-.5V8.35a.5.5 0 0 0-.11-.312l-1.48-1.85A.5.5 0 0 0 13.02 6H12zm-9 1a1 1 0 1 0 0 2 1 1 0 0 0 0-2m9 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2" />
            </svg>
            Vận chuyển trong 2-4 tuần.
          </p>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  //function changeImage(imageSrc) { document.getElementById("main-img").src =
  //imageSrc; }

  //function changeImage(imageSrc) {
  //gsap.to('.main-image img', { duration: 0.3, opacity: 0, onComplete: function () {
  //document.getElementById('main-img').src = imageSrc;
  //gsap.to('.main-image img', { duration: 0.3, opacity: 1 });
  //} });}

  // script.js
  function changeImage(imageSrc) {
    var mainImage = document.getElementById('main-img');
    var thumbnails = document.querySelectorAll('.thumbnail-container img');

    // Sử dụng gsap để thêm hiệu ứng chuyển động mượt mà
    gsap.to(mainImage, {
      duration: 0.5, opacity: 0, x: -50, onComplete: function () {
        mainImage.src = imageSrc;
        gsap.to(mainImage, { duration: 0.5, opacity: 1, x: 0 });
      }
    });

    // Xóa class 'selected-thumbnail' từ tất cả các ảnh thumbnail
    thumbnails.forEach(function (thumbnail) {
      thumbnail.classList.remove('selected-thumbnail');
    });

    // Thêm class 'selected-thumbnail' cho ảnh thumbnail được nhấn
    var selectedThumbnail = Array.from(thumbnails).find(t => t.src === imageSrc);
    if (selectedThumbnail) {
      selectedThumbnail.classList.add('selected-thumbnail');
    }
  }
</script>

<script>
  // Tạo giỏ hàng hoặc lấy từ Local Storage
  var cart = JSON.parse(localStorage.getItem('cart')) || [];

  function addToCart() {
    // Lấy thông tin sản phẩm
    var productName = document.getElementById('textinfo').innerText;
    var productRating = '4.8'; // Bạn có thể cần lấy giá trị đánh giá từ đâu đó
    var productPrice = '1.090.000₫'; // Bạn có thể cần lấy giá từ đâu đó
    var productImage = document.getElementById('main-img').src;

    // Tạo đối tượng sản phẩm
    var product = {
      name: productName,
      rating: productRating,
      price: productPrice,
      image: productImage
    };

    // Thêm sản phẩm vào giỏ hàng
    cart.push(product);

    // Lưu giỏ hàng vào Local Storage
    localStorage.setItem('cart', JSON.stringify(cart));

    // Thông báo thành công hoặc có thể thực hiện các hành động khác (hiển thị thông báo, chuyển đến trang giỏ hàng, vv.)
    Swal.fire({
      icon: 'success',
      title: 'Sản phẩm đã được thêm vào giỏ hàng!',
      showConfirmButton: false,
      timer: 1500 // Thời gian hiển thị thông báo (milliseconds)
    });
  }

</script>